<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Set</title>
  </head>
  <body>
    <script>
      // Set: 중복을 허용하지 않는 값(value)들의 컬렉션입니다.
      // - 동일한 값은 한 번만 저장됩니다.
      // - 값의 순서는 삽입된 순서대로 유지됩니다.
      // - 값의 존재 여부를 빠르게 확인할 때 유용합니다.

      // --- 1. Set 생성 및 값 추가 ---
      console.log("--- 생성 및 값 추가 ---");
      const set = new Set();

      // add(value): 값을 추가합니다. 이미 있는 값이면 무시됩니다.
      set.add(1);
      set.add("hello");
      set.add(1); // 중복된 값, 추가되지 않음
      set.add(true);
      const user = { name: "John" };
      set.add(user);

      console.log(set);

      // 생성자에 이터러블(배열 등)을 전달하여 초기화할 수 있습니다.
      // 중복된 값은 자동으로 제거됩니다.
      const setFromArr = new Set([1, 2, 3, 3, 4, 5, 5]);
      console.log("배열로부터 생성:", setFromArr);

      // --- 2. 값 확인 및 삭제 ---
      console.log("\n--- 값 확인 및 삭제 ---");

      // has(value): 값이 존재하는지 확인하고 boolean 값을 반환합니다.
      console.log('set.has("hello"):', set.has("hello")); // true
      console.log("set.has(2):", set.has(2)); // false

      // size: 요소의 개수를 반환합니다.
      console.log("set.size:", set.size);

      // delete(value): 값을 삭제합니다.
      set.delete(true);
      console.log("delete(true) 후:", set);

      // clear(): 모든 값을 삭제합니다.
      set.clear();
      console.log("clear() 후:", set);

      // --- 3. Set 반복 ---
      console.log("\n--- Set 반복 ---");
      const fruits = new Set(["사과", "바나나", "오렌지", "사과"]);

      // for...of
      for (const fruit of fruits) {
        console.log(fruit);
      }

      // forEach(callback(value, value, set))
      // Map과의 호환성을 위해 value가 두 번 들어갑니다.
      fruits.forEach((fruit) => {
        console.log(`[forEach] ${fruit}`);
      });

      // --- 4. Set의 대표적인 활용: 배열의 중복 제거 ---
      console.log("\n--- 배열 중복 제거 ---");
      const numbers = [1, 2, 3, 2, 4, 5, 1, 3];
      console.log("원본 배열:", numbers);

      const uniqueNumbers = [...new Set(numbers)];
      console.log("중복 제거된 배열:", uniqueNumbers);

      // --- 5. Set을 활용한 집합 연산 ---
      console.log("\n--- 5. 집합 연산 ---");
      const setA = new Set([1, 2, 3, 4, 5]);
      const setB = new Set([4, 5, 6, 7, 8]);

      // 합집합 (Union)
      const union = new Set([...setA, ...setB]);
      console.log("합집합:", union);

      // 교집합 (Intersection)
      const intersection = new Set([...setA].filter((item) => setB.has(item)));
      console.log("교집합:", intersection);

      // 차집합 (Difference)
      const difference = new Set([...setA].filter((item) => !setB.has(item)));
      console.log("차집합 (A - B):", difference);
    </script>
  </body>
</html>
