<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>반응형 이미지: Resolution Switching</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        padding: 20px;
        background-color: #f4f4f4;
      }
      .container {
        max-width: 1000px;
        margin: auto;
      }
      .example-box {
        background: white;
        padding: 20px;
        margin-bottom: 30px;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      }
      h1,
      h2 {
        border-bottom: 2px solid #007bff;
        padding-bottom: 10px;
      }
      pre {
        background: #eee;
        padding: 15px;
        border-radius: 5px;
        white-space: pre-wrap;
      }
      img {
        max-width: 100%;
        height: auto;
        border: 1px solid #ddd;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>반응형 이미지: Resolution Switching</h1>
      <p>
        사용자의 화면 해상도(픽셀 밀도)나 뷰포트 크기에 따라 브라우저가 최적의
        이미지를 선택하여 로드하는 기법입니다.
      </p>

      <div class="example-box">
        <h2>1. <code>x</code> 서술자: 픽셀 밀도 대응</h2>
        <p>
          주로 이미지의 표시 크기는 고정되어 있지만, 레티나 디스플레이 같은
          고해상도 화면을 위해 고화질 이미지를 제공할 때 사용합니다.
        </p>
        <p>
          브라우저는 <code>window.devicePixelRatio</code> 값을 확인하여 1x, 2x,
          3x 등 가장 적절한 이미지를 선택합니다.
        </p>

        <img
          src="./images/image-1x.png"
          srcset="
            ./images/image-1x.png 1x,
            ./images/image-2x.png 2x,
            ./images/image-3x.png 3x
          "
          alt="x 서술자 예제 이미지"
        />

        <pre>
&lt;img 
  src="image-1x.png"  &lt;!-- srcset을 지원하지 않는 브라우저를 위한 대체 이미지 --&gt;
  srcset="image-1x.png 1x,   &lt;!-- 일반 해상도(devicePixelRatio: 1)용 --&gt;
          image-2x.png 2x,   &lt;!-- 2배 고해상도(devicePixelRatio: 2)용 --&gt;
          image-3x.png 3x"  &lt;!-- 3배 고해상도(devicePixelRatio: 3)용 --&gt;
  alt="..."&gt;
      </pre
        >
      </div>

      <div class="example-box">
        <h2>
          2. <code>w</code> 서술자와 <code>sizes</code> 속성: 뷰포트 크기 대응
        </h2>
        <p>
          가장 강력하고 널리 쓰이는 방법입니다. 이미지의 표시 크기가
          뷰포트(화면) 크기에 따라 유동적으로 변할 때 사용합니다.
        </p>

        <h3><code>w</code> 서술자</h3>
        <p>
          <code>srcset</code>에 각 이미지 파일의 실제 가로 너비(단위: w)를
          명시합니다. 브라우저는 이 정보를 보고 어떤 이미지가 얼마나 큰지
          인지합니다.
        </p>

        <h3><code>sizes</code> 속성</h3>
        <p>
          미디어 조건에 따라 이미지가 화면에서 차지하게 될 '예상 너비'를
          브라우저에게 알려줍니다. 브라우저는 <code>sizes</code> 값과 기기의
          픽셀 밀도를 종합하여, <code>srcset</code>에 명시된 `w` 너비 중 가장
          적절하고 효율적인 이미지를 "스스로" 계산하고 선택합니다.
        </p>

        <img
          src="./images/image-small.png"
          srcset="
            ./images/image-small.png   400w,
            ./images/image-medium.png  700w,
            ./images/image-large.png  1000w
          "
          sizes="(max-width: 600px) 100vw, (max-width: 900px) 70vw, 500px"
          alt="w 서술자와 sizes 예제 이미지"
        />

        <p>
          <strong>위 코드의 <code>sizes</code> 속성 해석:</strong>
        </p>
        <ul>
          <li>
            뷰포트 너비가 600px 이하일 때, 이미지는 뷰포트 너비의 100%로 표시될
            것이다. (<code>100vw</code>)
          </li>
          <li>
            뷰포트 너비가 601px ~ 900px일 때, 이미지는 뷰포트 너비의 70%로
            표시될 것이다. (<code>70vw</code>)
          </li>
          <li>
            그 외의 경우(901px 이상), 이미지는 500px의 고정 너비로 표시될
            것이다.
          </li>
        </ul>

        <pre>
&lt;img 
  src="image-small.png" &lt;!-- 대체 이미지 --&gt;
  srcset="image-small.png 400w,   &lt;!-- 실제 이미지 너비 400px --&gt;
          image-medium.png 700w,  &lt;!-- 실제 이미지 너비 700px --&gt;
          image-large.png 1000w" &lt;!-- 실제 이미지 너비 1000px --&gt;
  sizes="(max-width: 600px) 100vw, (max-width: 900px) 70vw, 500px"
  alt="..."&gt;
      </pre
        >
        <p>
          브라우저 창 크기를 조절한 후 개발자 도구의 Network 탭을
          확인하면(페이지 로딩시 결정), 화면 크기에 따라 다른 이미지 파일이
          로드되는 것을 볼 수 있습니다. (캐시 비활성화 후 테스트)
        </p>
      </div>
    </div>
  </body>
</html>
