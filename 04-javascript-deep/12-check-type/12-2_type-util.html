<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>타입 체크 유틸리티 함수</title>
  </head>
  <body>
    <script>
      // 자주 사용하는 타입 체크 로직들을 하나의 객체로 묶어
      // 재사용 가능하고 일관된 유틸리티 함수로 만든 예시입니다.

      const TypeChecker = {
        // 기본 타입 체크
        isString: (value) => typeof value === "string",
        isNumber: (value) => typeof value === "number" && !isNaN(value),
        isBoolean: (value) => typeof value === "boolean",
        isFunction: (value) => typeof value === "function",

        // 특별한 값들
        isNull: (value) => value === null,
        isUndefined: (value) => value === undefined,
        // '=='를 사용해 null과 undefined를 한번에 체크하는 트릭
        isNullish: (value) => value == null,

        // 객체 타입들
        isArray: (value) => Array.isArray(value),
        // 순수 객체인지 확인 (null과 배열 제외)
        isObject: (value) =>
          value !== null && typeof value === "object" && !Array.isArray(value),
        isDate: (value) => value instanceof Date,
        isRegExp: (value) => value instanceof RegExp,

        // 빈 값 체크 (null, undefined, 빈 문자열, 빈 배열, 빈 객체)
        isEmpty: (value) => {
          if (value == null) return true; // null 또는 undefined
          if (TypeChecker.isString(value)) return value.trim() === "";
          if (TypeChecker.isArray(value)) return value.length === 0;
          // new Date() 등도 빈 객체로 취급되는 것을 방지
          if (TypeChecker.isObject(value))
            return (
              Object.keys(value).length === 0 && value.constructor === Object
            );
          return false;
        },

        // 정확한 타입 이름 반환 (소문자로)
        getType: (value) => {
          if (value === null) return "null";
          return Object.prototype.toString
            .call(value)
            .slice(8, -1)
            .toLowerCase();
        },
      };

      // ------------------- 사용 예시 -------------------
      console.log("--- 기본 타입 ---");
      console.log(`isString('hello'):`, TypeChecker.isString("hello")); // true
      console.log(`isNumber(123):`, TypeChecker.isNumber(123)); // true
      console.log(`isNumber(NaN):`, TypeChecker.isNumber(NaN)); // false (NaN은 숫자가 아니라고 처리)

      console.log("\n--- 특별한 값 ---");
      console.log(`isNull(null):`, TypeChecker.isNull(null)); // true
      console.log(
        `isUndefined(undefined):`,
        TypeChecker.isUndefined(undefined)
      ); // true
      console.log(`isNullish(null):`, TypeChecker.isNullish(null)); // true
      console.log(`isNullish(undefined):`, TypeChecker.isNullish(undefined)); // true
      console.log(`isNullish(0):`, TypeChecker.isNullish(0)); // false

      console.log("\n--- 객체 타입 ---");
      console.log(`isArray([]):`, TypeChecker.isArray([])); // true
      console.log(`isObject({}):`, TypeChecker.isObject({})); // true
      console.log(`isObject([]):`, TypeChecker.isObject([])); // false (isObject는 배열을 제외)
      console.log(`isDate(new Date()):`, TypeChecker.isDate(new Date())); // true

      console.log("\n--- 빈 값 체크 ---");
      console.log(`isEmpty(null):`, TypeChecker.isEmpty(null)); // true
      console.log(`isEmpty('   '):`, TypeChecker.isEmpty("   ")); // true
      console.log(`isEmpty([]):`, TypeChecker.isEmpty([])); // true
      console.log(`isEmpty({}):`, TypeChecker.isEmpty({})); // true
      console.log(`isEmpty(0):`, TypeChecker.isEmpty(0)); // false
      console.log(`isEmpty(new Date()):`, TypeChecker.isEmpty(new Date())); // false

      console.log("\n--- 정확한 타입 이름 ---");
      console.log(`getType(new Date()):`, TypeChecker.getType(new Date())); // "date"
      console.log(`getType(null):`, TypeChecker.getType(null)); // "null"
      console.log(`getType(/abc/):`, TypeChecker.getType(/abc/)); // "regexp"
      console.log(
        `getType(() => {}):`,
        TypeChecker.getType(() => {})
      ); // "function"
    </script>
  </body>
</html>
