<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JavaScript 배열 생성</title>
  </head>
  <body>
    <script>
      // JavaScript에서 배열을 생성하는 다양한 방법을 알아봅니다.

      // ------------------- 1. 배열 리터럴 (Array Literal) -------------------
      // 가장 간단하고, 빠르며, 일반적으로 가장 권장되는 방법입니다.
      console.log("--- 1. 배열 리터럴 [] ---");

      const arr1 = []; // 빈 배열
      console.log("빈 배열:", arr1);

      const arr2 = [1, 2, 3, 4, 5]; // 초기값을 가진 배열
      console.log("초기값을 가진 배열:", arr2);

      const arr3 = ["apple", 123, true, null, { a: 1 }]; // 다양한 타입을 가진 배열
      console.log("다양한 타입을 가진 배열:", arr3);

      // ------------------- 2. Array 생성자 (new Array()) -------------------
      // 인자의 개수나 타입에 따라 동작이 달라져 혼동을 줄 수 있어 사용 시 주의가 필요합니다.
      console.log("\n--- 2. Array 생성자 new Array() ---");

      // 2-1. 인자가 2개 이상일 경우: 인자를 요소로 하는 배열 생성
      const arr4 = new Array(1, 2, 3);
      console.log("new Array(1, 2, 3):", arr4); // [1, 2, 3]

      // 2-2. 인자가 1개의 숫자일 경우: 해당 숫자만큼의 길이를 가진 빈 배열 생성
      // ※※※ 가장 흔한 함정! ※※※
      const arr5 = new Array(5);
      console.log("new Array(5):", arr5); // [ <5 empty items> ] -> 길이가 5인 빈 배열
      console.log("arr5.length:", arr5.length); // 5

      // 2-3. 인자가 1개지만 숫자가 아닐 경우: 해당 인자를 유일한 요소로 하는 배열 생성
      const arr6 = new Array("apple");
      console.log('new Array("apple"):', arr6); // ['apple']

      // ------------------- 3. Array.of() (ES6+) -------------------
      // Array 생성자의 모호함을 해결하기 위해 도입되었습니다.
      // 인자의 개수나 타입과 상관없이 항상 인자를 요소로 하는 배열을 생성합니다.
      console.log("\n--- 3. Array.of() ---");

      const arr7 = Array.of(5);
      console.log("Array.of(5):", arr7); // [5] -> new Array(5)와 동작이 다름!

      const arr8 = Array.of(1, 2, 3);
      console.log("Array.of(1, 2, 3):", arr8); // [1, 2, 3]

      // ------------------- 4. Array.from() (ES6+) -------------------
      // 유사 배열 객체(array-like object)나 반복 가능한 객체(iterable object)를 복사해 새로운 배열을 만듭니다.
      console.log("\n--- 4. Array.from() ---");

      // 4-1. 문자열에서 배열 생성
      const arr9 = Array.from("hello");
      console.log('Array.from("hello"):', arr9); // ['h', 'e', 'l', 'l', 'o']

      // 4-2. Set에서 배열 생성
      const mySet = new Set(["a", "b", "c"]);
      const arr10 = Array.from(mySet);
      console.log("Set에서 생성:", arr10);

      // 4-3. map 함수와 함께 사용하기 (매우 유용)
      // 길이가 5인 배열을 만들고, 각 요소를 인덱스 값으로 채우기
      const arr11 = Array.from({ length: 5 }, (value, index) => index);
      console.log("map 함수와 함께 사용:", arr11);

      // 1부터 5까지의 숫자로 배열 채우기
      const arr12 = Array.from({ length: 5 }, (_, i) => i + 1);
      console.log("1~5로 채운 배열:", arr12);

      // ------------------- 응용: 2차원 배열 생성하기 -------------------
      console.log("\n--- 응용: 2차원 배열 생성하기 ---");
      const rows = 3;
      const cols = 4;

      // 방법 1: 리터럴로 직접 생성 (크기가 작고 고정적일 때)
      const matrixLiteral = [
        [1, 2, 3],
        [4, 5, 6],
        [7, 8, 9],
      ];
      console.log("리터럴로 생성:", matrixLiteral);

      // 방법 2: for 반복문 사용 (전통적인 방법)
      const matrixFor = [];
      for (let i = 0; i < rows; i++) {
        const innerArray = [];
        for (let j = 0; j < cols; j++) {
          innerArray.push(0); // 0으로 초기화
        }
        matrixFor.push(innerArray);
      }
      console.log("for문으로 생성 (3x4):", matrixFor);

      // 방법 3: Array.from()과 fill() 사용 (현대적이고 간결한 방법)
      // Array.from의 콜백 함수가 각 행마다 '새로운' 배열을 생성하여 반환하는 것이 핵심입니다.
      const matrixFrom = Array.from({ length: rows }, () =>
        new Array(cols).fill(0)
      );
      console.log("Array.from으로 생성 (3x4):", matrixFrom);

      // --- 주의! 잘못된 2차원 배열 생성 방법 ---
      // fill()에 객체(배열 포함)를 전달하면 해당 객체의 '참조'가 복사됩니다.
      // 즉, 모든 행이 똑같은 하나의 배열을 가리키게 됩니다.
      const wrongMatrix = new Array(rows).fill(new Array(cols).fill(0));

      // 한 곳(첫 번째 행의 첫 번째 열)만 수정해도...
      wrongMatrix[0][0] = 99;

      // 모든 행이 변경되는 문제가 발생합니다.
      console.log("잘못된 방법으로 생성한 배열:", wrongMatrix);

      // ------------------- 5. 결론 및 추천 방법 -------------------
      /*
       * - 대부분의 경우: 간결하고 예측 가능한 `배열 리터럴 []`을 사용하세요.
       * - 동적으로 배열을 생성해야 할 때: `Array.of()` 또는 `Array.from()`을 사용하세요.
       *   - `Array.of()`: 전달된 인자들을 그대로 요소로 만드는 경우
       *   - `Array.from()`: 다른 객체를 배열로 변환하거나, 특정 로직으로 배열을 채우는 경우
       * - `new Array()` 생성자는 혼동을 줄 수 있으므로 가급적 사용을 피하는 것이 좋습니다.
       */
    </script>
  </body>
</html>
